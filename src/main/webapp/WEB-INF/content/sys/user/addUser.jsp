<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %><%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <%@ include file="../common/common.jsp" %></head><body><p style="font-size-adjust: inherit">用户管理</p><form class="form-horizontal" role="form" id="formId" action="${path}/sys/user/save.do" method="post">    <div class="container-fluid">        <div class="row" style="display: none" id="modifyAdminUserDiv">            <div class="form-group">                <label class="col-md-2 control-label" style="font-size: larger">用户类型:</label>                <div class="col-md-2" style="text-align:left">                    <input style="width:100%" name="" readonly value="管理员" type="text" class="form-control"                           placeholder="请输入账号"/>                </div>            </div>            <div class="form-group">                <label class="col-md-2 control-label" style="font-size: larger">账号:</label>                <div class="col-md-2" style="text-align:left">                    <input style="width:100%" name="userAccount" value="${user.userAccount}" type="text"                           class="form-control"                           placeholder="请输入账号"/>                </div>            </div>            <div class="form-group">                <label class="col-md-2 control-label" style="font-size: larger">电话:</label>                <div class="col-md-2" style="text-align:left">                    <input style="width:100%" name="phone" value="${user.phone}" type="text" class="form-control"                           placeholder="请输入电话"/>                </div>            </div>            <c:if test="${user.id>0}">                <div class="form-group">                    <label class="col-md-2 control-label" style="font-size: larger">是否修改密码:</label>                    <div class="col-md-2" style="text-align:left">                        <div class="radio">                            <label>                                <input type="radio" name="hasModifyPwd" onclick="modifyPwd('Y')" value="Y"/>是                            </label>                        </div>                        <div class="radio">                            <label>                                <input type="radio" name="hasModifyPwd" onclick="modifyPwd('N')" checked="checked"                                       value="N"/>否                            </label>                        </div>                    </div>                </div>            </c:if>            <div class="form-group" id="pwdId" <c:if test="${user.id>0}">style="display: none" </c:if>>                <label class="col-md-2 control-label" id="lablePwd" style="font-size: larger">密码:</label>                <div class="col-md-2" style="text-align:left">                    <input style="width:100%" name="password" value="${user.password}" type="password"                           class="form-control" placeholder="请输入密码"/>                </div>            </div>            <div class="form-group" id="confPwdId" <c:if test="${user.id>0}">style="display: none" </c:if>>                <label class="col-md-2 control-label" style="font-size: larger" id="lableConfPwd">再次输入密码:</label>                <div class="col-md-2" style="text-align:left">                    <input style="width:100%" name="confirmPassword" value="${user.password}" type="password"                           class="form-control" placeholder="请输入密码"/>                </div>            </div>        </div>        <div class="row" style="display: none" id="modifyNormalUserDiv">            <div class="form-group">                <label class="col-md-2 control-label" style="font-size: larger">昵称</label>                <div class="col-md-2" style="text-align:left">                    <input style="width:100%" name="name" value="${user.name}"                           readonly type="text" class="form-control"/>                </div>            </div>            <div class="form-group">                <label class="col-md-2 control-label" style="font-size: larger">用户类型:</label>                <div class="col-md-2" style="text-align:left">                    <select class="form-control" name="userType" id="userType">                        <c:forEach items="${userTypeEnum}" var="type" varStatus="status">                            <option value="${type.code}"                                    <c:if test="${user.userType==type.code}">selected="selected"</c:if>>${type.name}</option>                        </c:forEach>                    </select>                </div>            </div>        </div>        <br/>        <div class="form-group">            <div class="col-md-2">                <button type="submit" class="btn btn-primary btn-sm" value="Sign up">提交</button>                &nbsp                <button type="button" id="resetBtn" class="btn btn-info btn-sm">重置</button>                &nbsp                <button type="button" class="btn btn-success btn-sm" onclick="back()">返回</button>            </div>        </div>        <input type="hidden" value="${user.id}" name="id" id="userId"/>        <c:if test="${operate=='add'|| (operate=='modify'&& user.userType == '1')}">            <input type="hidden" value="1" name="userType"/>        </c:if>    </div>    </div></form></body><script>    $(document).ready(function () {        var userType ="${user.userType==null?"":user.userType}";        var operate="${operate}";        //新增或修改管理员        if (operate=='add'|| (operate=='modify'&& userType == '1')) {            $("#modifyAdminUserDiv").removeAttr("style");            $("#userType").attr("disabled","disabled");        } else {            $("#modifyNormalUserDiv").removeAttr("style");        }        /**         * 下面是进行插件初始化         * 你只需传入相应的键值对         * */        $('#formId').bootstrapValidator({            message: 'This value is not valid',            feedbackIcons: {                /*输入框不同状态，显示图片的样式*/                valid: 'glyphicon glyphicon-ok',                invalid: 'glyphicon glyphicon-remove',                validating: 'glyphicon glyphicon-refresh'            },            fields: {                /*验证*/                userAccount: {                    /*键名name和input name值对应*/                    message: 'The name is not valid',                    validators: {                        notEmpty: {                            /*非空提示*/                            message: '账号不能为空'                        },                        stringLength: {                            /*长度提示*/                            min: 1,                            max: 20,                            message: '用户名长度必须在1到30之间'                        }/*最后一个没有逗号*/                    }                },                password: {                    validators: {                        notEmpty: {                            message: '密码不能为空'                        },                        identical: {                            field: 'confirmPassword',                            message: '和确认密码不一致'                        },                        different: {                            field: 'name',                            message: '密码不能和用户姓名一样'                        }                    }                },                confirmPassword: {                    validators: {                        notEmpty: {                            message: '确认密码不能为空'                        },                        identical: {                            field: 'password',                            message: '和确认密码不一致'                        },                        different: {                            field: 'name',                            message: '密码不能和用户姓名一样'                        }                    }                },                phone: {                    validators: {                        regexp: {                            regexp: /^1\d{10}$/,                            message: '不符合手机号格式'                        },                        remote:{                            url:'${path}/sys/user/ajax/validate/phone.do',                            threshold:11,                            message:'手机号已经存在',                            delay:2000,                            type:'POST',                            data:{                                phone:$("#phone").val(),                                id:$("#userId").val()                            }                        }                    }                }            }        });    });    function modifyPwd(flag) {        if (flag == 'Y') {            $("#pwdId").removeAttr("style");            $("#confPwdId").removeAttr("style");            $("input[name='password']").val("");            $("input[name='confirmPassword']").val("");            $("#lablePwd").css("color", "pink");            $("#lableConfPwd").css("color", "pink");        } else {            $("#pwdId").css("display", "none");            $("#confPwdId").css("display", "none");        }    }    function save() {        $('#formId').bootstrapValidator('validate');    }    $('#resetBtn').click(function () {        $('#formId').data('bootstrapValidator').resetForm(true);    });    function back() {        location.href = document.referrer;    }</script></html>